# ğŸ—ï¸ Basado en la imagen oficial de PostgreSQL 16
FROM postgres:16

# ğŸ› ï¸ Ejecutar como root para configurar el sistema de archivos
USER root

# ğŸ“‚ **Crear directorio de backups y asignar permisos**
RUN mkdir -p /backups && chmod -R 777 /backups && chown -R postgres:postgres /backups

# ğŸ”§ **Copiar el script de entrada y asignar permisos**
COPY entrypoint_pgbackup.sh /entrypoint_pgbackup.sh
RUN chmod +x /entrypoint_pgbackup.sh

# ğŸ‘¤ **Cambiar al usuario 'postgres' para la ejecuciÃ³n**
USER postgres

# ğŸ **Definir el entrypoint**
ENTRYPOINT ["/entrypoint_pgbackup.sh"]
