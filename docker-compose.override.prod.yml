#-----------------------------------------------------------------------------
# 🚀 Ejecutar en Producción (Ubuntu):
# docker-compose -f docker-compose.yml -f docker-compose.override.prod.yml up -d
#-----------------------------------------------------------------------------

services:
  # 🏗️ Odoo en modo Producción
  odoo:
    env_file:
      - .env.prod
    container_name: ${INSTANCE:-prod}-odoo
    ports:
      - "8090:8069"  # 📌 Puerto HTTP de Odoo para Producción
    environment:
      - ODOO_ENV=production  # 🏗️ Define el entorno como Producción
    networks:
      - odoo-network

  # 🐘 PostgreSQL en Producción
  postgres:
    env_file:
      - .env.prod
    container_name: ${INSTANCE:-prod}-postgres

  # 🔴 Redis en Producción
  redis:
    env_file:
      - .env.prod
    container_name: ${INSTANCE:-prod}-redis

  # 🌍 Nginx en Producción
  nginx:
    container_name: ${INSTANCE:-prod}-nginx
    restart: always
    profiles:
      - "prod"
    volumes:
      - ./config/nginx-prod.conf:/etc/nginx/conf.d/default.conf:ro
    ports:
      - "80:80"
      - "443:443"  # 🔒 Habilita HTTPS en Producción
